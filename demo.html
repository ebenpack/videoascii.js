<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
    
    <canvas id="canvas" width="300" height="300"></canvas>

    <script src="build/videoascii.js"></script>
    <script>
         (function(){
            var canvas = document.getElementById('canvas');
            var ctx = canvas.getContext('2d');

            // Prepare canvas and display instruction
            canvas.style.border = "4px dashed gray";
            ctx.textAlign="center"; 
            ctx.font="14pt Arial"; 
            ctx.fillText("Drop video files here to asciify", 150, 150); 

            function make_ascii(canvas, videoSrc){
                // canvas.width = video.width;
                // canvas.height = video.height;
                canvas.style.border = "";
                videoascii({
                    canvas: canvas,
                    videoSrc: videoSrc,
                    font_size: 8,
                    monochrome: false,
                    autoplay: true
                });

            }

            // Register canvas drag 'n' drop handler
            canvas.addEventListener("dragover", function (e) {
                e.preventDefault();
            }, false);
            canvas.addEventListener("drop", function (e) {
                var files = e.dataTransfer.files;
                if (files.length > 0) {
                    var file = files[0];
                    if (typeof FileReader !== "undefined" && file.type.indexOf("video") != -1) {
                        var reader = new FileReader();
                        reader.onload = function (evt) {
                            var videoSrc = evt.target.result;
                            make_ascii(canvas, videoSrc);
                        };
                    reader.readAsDataURL(file);
                    }
                }
                e.preventDefault();
            }, false);  
        })()
    </script>
</body>
</html>